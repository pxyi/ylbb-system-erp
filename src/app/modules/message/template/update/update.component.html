<form nz-form [formGroup]="formGroup">
  <div nz-row nzGutter="8">
    <div nz-col nzSpan="24">
      <nz-form-item>
        <nz-form-label nzRequired nzFor="title">模板标题</nz-form-label>
        <nz-form-control>
          <input nz-input placeholder="请输入模板标题" formControlName="title" id="title">
          <nz-form-explain *ngIf="formGroup.get('title').dirty && formGroup.get('title').hasError('required')">请输入模板标题！
          </nz-form-explain>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col nzSpan="24">
      <nz-form-item>
        <nz-form-label nzRequired>短信前缀</nz-form-label>
        <nz-form-control>
          <input nz-input formControlName="prefix">
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col nzSpan="24">
      <nz-form-item>
        <nz-form-label nzRequired>模板内容</nz-form-label>
        <nz-form-control>
          <nz-input-group [nzSuffix]="suffixTemplate">
            <textarea nz-input placeholder="请输入模板内容" formControlName="memo" [nzAutosize]="{ minRows: 3, maxRows: 4 }"></textarea>
            <ng-template #suffixTemplate>
              <span [style.color]="formGroup.get('memo').value && formGroup.get('memo').value.length > (70 - (formGroup.get('prefix').value.length + 8)) ? '#f5222d' : ''">
                {{ formGroup.get('memo').value ? formGroup.get('memo').value.length + formGroup.get('prefix').value.length + 8 : formGroup.get('prefix').value.length + 8 }}
              </span>
              <span>/70</span>
            </ng-template>
          </nz-input-group>
          <nz-form-explain *ngIf="formGroup.get('memo').dirty && formGroup.get('memo').hasError('required')">请输入模板内容！</nz-form-explain>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col nzSpan="24">
      <nz-form-item>
        <nz-form-label nzRequired>短信后缀</nz-form-label>
        <nz-form-control>
          <input nz-input formControlName="suffix">
        </nz-form-control>
      </nz-form-item>
    </div>
  </div>
</form>

<div class="drawer-footer">
  <button nz-button (click)="close()">取消</button>
  <button nz-button nzType="primary" [nzLoading]="saveLoading" (click)="save()">保存</button>
</div>